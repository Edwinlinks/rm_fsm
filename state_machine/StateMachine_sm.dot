digraph StateMachine {

    node
        [shape=Mrecord width=1.5];

    subgraph cluster_StateMachineMap {

        label="StateMachineMap";

        //
        // States (Nodes)
        //

        "StateMachineMap::Idle"
            [label="{Idle|dbusUpdate/\l}"];

        "StateMachineMap::Raw"
            [label="{Raw|Entry/\l&nbsp;&nbsp;&nbsp;rawChassis;\l&nbsp;&nbsp;&nbsp;rawGimbal;\l&nbsp;&nbsp;&nbsp;rawShooter;\l|dbusUpdate/\l}"];

        "StateMachineMap::Calibrate"
            [label="{Calibrate|Entry/\l&nbsp;&nbsp;&nbsp;run;\l|dbusUpdate/\l}"];

        "StateMachineMap::Standby"
            [label="{Standby|Entry/\l&nbsp;&nbsp;&nbsp;standbyChassis;\l&nbsp;&nbsp;&nbsp;standbyGimbal;\l&nbsp;&nbsp;&nbsp;standbyShooter;\l|dbusUpdate/\l}"];

        "StateMachineMap::Cruise"
            [label="{Cruise|Entry/\l&nbsp;&nbsp;&nbsp;cruiseChassis;\l&nbsp;&nbsp;&nbsp;cruiseShooter;\l&nbsp;&nbsp;&nbsp;cruiseGimbal;\l|dbusUpdate/\l}"];

        "%start"
            [label="" shape=circle style=filled fillcolor=black width=0.25];

        //
        // Transitions (Edges)
        //

        "StateMachineMap::Idle" -> "StateMachineMap::Calibrate"
            [label="dbusUpdate\l\[ ctxt.getCalibrateStatus() == false \]/\linitCalibrate;\l"];

        "StateMachineMap::Idle" -> "StateMachineMap::Raw"
            [label="dbusUpdate\l\[ ctxt.isRaw(data_dbus_) == true \]/\linitRaw;\l"];

        "StateMachineMap::Idle" -> "StateMachineMap::Standby"
            [label="refereeUpdate\l\[ ctxt.isStandby(referee_) == true \]/\linitStandby;\l"];

        "StateMachineMap::Idle" -> "StateMachineMap::Cruise"
            [label="refereeUpdate\l\[ ctxt.isCruise(referee_) == true \]/\linitCruise;\l"];

        "StateMachineMap::Raw" -> "StateMachineMap::Calibrate"
            [label="dbusUpdate\l\[ ctxt.isCalibrate(data_dbus_) == true \]/\linitCalibrate;\l"];

        "StateMachineMap::Raw" -> "StateMachineMap::Standby"
            [label="refereeUpdate\l\[ ctxt.isStandby(referee_) == true \]/\linitStandby;\l"];

        "StateMachineMap::Raw" -> "StateMachineMap::Cruise"
            [label="refereeUpdate\l\[ ctxt.isCruise(referee_) == true \]/\linitCruise;\l"];

        "StateMachineMap::Calibrate" -> "StateMachineMap::Standby"
            [label="refereeUpdate\l\[ ctxt.isStandby(referee_) == true \]/\linitStandby;\l"];

        "StateMachineMap::Calibrate" -> "StateMachineMap::Cruise"
            [label="refereeUpdate\l\[ ctxt.isCruise(referee_) == true \]/\linitCruise;\l"];

        "StateMachineMap::Calibrate" -> "StateMachineMap::Raw"
            [label="dbusUpdate\l\[ ctxt.isRaw(data_dbus_) == true \]/\linitRaw;\l"];

        "StateMachineMap::Standby" -> "StateMachineMap::Cruise"
            [label="refereeUpdate\l\[ ctxt.isCruise(referee_) == true \]/\linitCruise;\l"];

        "StateMachineMap::Standby" -> "StateMachineMap::Raw"
            [label="dbusUpdate\l\[ ctxt.isRaw(data_dbus_) == true \]/\linitRaw;\l"];

        "StateMachineMap::Cruise" -> "StateMachineMap::Standby"
            [label="refereeUpdate\l\[ ctxt.isStandby(referee_) == true \]/\linitStandby;\l"];

        "StateMachineMap::Cruise" -> "StateMachineMap::Raw"
            [label="dbusUpdate\l\[ ctxt.isRaw(data_dbus_) == true \]/\linitRaw;\l"];

        "%start" -> "StateMachineMap::Idle"
    }

}

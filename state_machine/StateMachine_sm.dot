digraph StateMachine {

    node
        [shape=Mrecord width=1.5];

    subgraph cluster_StateMachineMap {

        label="StateMachineMap";

        //
        // States (Nodes)
        //

        "StateMachineMap::Idle"
            [label="{Idle|dbusUpdate/\l}"];

        "StateMachineMap::Raw"
            [label="{Raw|Entry/\l&nbsp;&nbsp;&nbsp;rawChassis;\l|dbusUpdate/\l&nbsp;&nbsp;&nbsp;rawRun;\l}"];

        "StateMachineMap::Cruise"
            [label="{Cruise|Entry/\l&nbsp;&nbsp;&nbsp;cruiseChassis;\l|dbusUpdate/\l&nbsp;&nbsp;&nbsp;cruiseRun;\lradarUpdate/\l&nbsp;&nbsp;&nbsp;changeVel;\l}"];

        "%start"
            [label="" shape=circle style=filled fillcolor=black width=0.25];

        //
        // Transitions (Edges)
        //

        "StateMachineMap::Idle" -> "StateMachineMap::Cruise"
            [label="dbusUpdate\l\[ ctxt.isCruise(data_dbus_) == true \]/\linitCruise;\l"];

        "StateMachineMap::Idle" -> "StateMachineMap::Raw"
            [label="dbusUpdate\l\[ ctxt.isRaw(data_dbus_) == true \]/\linitRaw;\l"];

        "StateMachineMap::Raw" -> "StateMachineMap::Cruise"
            [label="dbusUpdate\l\[ ctxt.isCruise(data_dbus_) == true \]/\linitCruise;\l"];

        "StateMachineMap::Cruise" -> "StateMachineMap::Raw"
            [label="dbusUpdate\l\[ ctxt.isRaw(data_dbus_) == true \]/\linitRaw;\l"];

        "%start" -> "StateMachineMap::Idle"
    }

}

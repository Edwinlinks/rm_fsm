digraph StateMachine {

    node
        [shape=Mrecord width=1.5];

    subgraph cluster_StateMachineMap {

        label="StateMachineMap";

        //
        // States (Nodes)
        //

        "StateMachineMap::Idle"
            [label="{Idle|dbusUpdate/\l}"];

        "StateMachineMap::Raw"
            [label="{Raw|Entry/\l&nbsp;&nbsp;&nbsp;initRaw;\l}"];

        "StateMachineMap::Calibrate"
            [label="{Calibrate|Entry/\l&nbsp;&nbsp;&nbsp;initCalibrate;\l}"];

        "StateMachineMap::Standby"
            [label="{Standby|Entry/\l&nbsp;&nbsp;&nbsp;initStandby;\l}"];

        "StateMachineMap::Cruise"
            [label="{Cruise|Entry/\l&nbsp;&nbsp;&nbsp;initCruise;\l}"];

        "%start"
            [label="" shape=circle style=filled fillcolor=black width=0.25];

        //
        // Transitions (Edges)
        //

        "StateMachineMap::Idle" -> "StateMachineMap::Calibrate"
            [label="dbusUpdate\l\[ ctxt.isCalibrate(data_dbus_) == true \]/\lrun;\l"];

        "StateMachineMap::Idle" -> "StateMachineMap::Raw"
            [label="dbusUpdate\l\[ ctxt.isRaw(data_dbus_) == true \]/\lrun;\l"];

        "StateMachineMap::Raw" -> "StateMachineMap::Calibrate"
            [label="dbusUpdate\l\[ ctxt.isCalibrate(data_dbus_) == true \]/\lrun;\l"];

        "StateMachineMap::Calibrate" -> "StateMachineMap::Standby"
            [label="refereeUpdate\l\[ ctxt.isStandby(referee_) == true \]/\lrun;\l"];

        "StateMachineMap::Calibrate" -> "StateMachineMap::Cruise"
            [label="refereeUpdate\l\[ ctxt.isCruise(referee_) == true \]/\lrun;\l"];

        "StateMachineMap::Calibrate" -> "StateMachineMap::Raw"
            [label="dbusUpdate\l\[ ctxt.isRaw(data_dbus_) == true \]/\lrun;\l"];

        "StateMachineMap::Standby" -> "StateMachineMap::Cruise"
            [label="refereeUpdate\l\[ ctxt.isCruise(referee_) == true \]/\lrun;\l"];

        "StateMachineMap::Standby" -> "StateMachineMap::Raw"
            [label="dbusUpdate\l\[ ctxt.isRaw(data_dbus_) == true \]/\lrun;\l"];

        "StateMachineMap::Cruise" -> "StateMachineMap::Standby"
            [label="refereeUpdate\l\[ ctxt.isStandby(referee_) == true \]/\lrun;\l"];

        "StateMachineMap::Cruise" -> "StateMachineMap::Raw"
            [label="dbusUpdate\l\[ ctxt.isRaw(data_dbus_) == true \]/\lrun;\l"];

        "%start" -> "StateMachineMap::Idle"
    }

}
